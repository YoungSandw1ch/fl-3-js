{"mappings":"YAAA,MAAMA,EAAM,4DAgBL,SAASC,EAAWC,GACzB,OAAOC,MAAM,GAAGH,IAAME,IAAM,CAC1BE,OAAQ,U,CAIL,SAASC,EAAWH,EAAII,GAC7B,OAAOH,MAAM,GAAGH,IAAME,IAAM,CAC1BE,OAAQ,MACRG,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUJ,I,CCrBzB,IAAIK,EAAQ,GAEZ,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,KAAMF,SAASC,cAAc,SAC7BE,OAAQH,SAASC,cAAc,YAmDjC,SAASG,IACP,MAAMC,EAAcR,EAAMS,IAAIC,GAAkBC,KAAK,IAErDV,EAAKC,KAAKU,UAAY,GACtBX,EAAKC,KAAKW,mBAAmB,aAAcL,E,CAG7C,SAASE,GAAiBI,KAAEA,EAAIC,SAAEA,EAAQxB,GAAEA,IAC1C,MAAO,uBACWwB,EAAW,iBAAmB,WAAWxB,gEAE9BwB,EAAW,UAAY,sCACtBA,EAAW,OAAS,OAAOD,2E,CAqC3D,SAASE,IACPf,EAAKK,OAAOW,UAAUC,IAAI,O,CAG5B,SAASC,IACPlB,EAAKK,OAAOW,UAAUG,OAAO,O,CAG/B,SAASC,IACPpB,EAAKI,KAAKiB,O,CAtCVN,IDhFOxB,MAAMH,GAAKkC,MAAKC,GAAKA,EAAEC,SCsFVF,MAAK5B,IACvBK,EAAQL,CAAI,IALH4B,KAAKhB,GAAamB,QAAQP,GApEvClB,EAAKC,KAAKyB,iBAAiB,SAI3B,SAAyBC,GACvB,GAAIA,EAAEC,SAAWD,EAAEE,cAAe,OAElC,MAAMC,EAAWH,EAAEC,OAAOG,QAAQ,MAC5BzC,EAAKwC,EAASxC,GAEM,WAAtBqC,EAAEC,OAAOI,WACXjB,IACA1B,EAAWC,GAAIgC,KAkEnB,SAAoBhC,GAClBS,EAAQA,EAAMkC,QAAOC,GAAMA,EAAG5C,KAAOA,G,CAnEf6C,CAAW7C,IAAKgC,KAAKhB,GAAamB,QAAQP,IAGhE,GAA0B,UAAtBS,EAAEC,OAAOI,SAAsB,CACjC,MAAMtC,EAkEV,SAAoBJ,GAClB,MAAM8C,EAAoB,GAS1B,OAPArC,EAAMS,KAAI0B,IACJA,EAAG5C,KAAOA,IACZ4C,EAAGpB,UAAYoB,EAAGpB,SAClBsB,EAAkBtB,SAAWoB,EAAGpB,S,IAI7BsB,C,CA5EQC,CAAW/C,GACxBG,EAAWH,EAAII,GAEFiC,EAAEC,OAAOU,mBACjBtB,UAAUuB,OAAO,QACtBT,EAASd,UAAUuB,OAAO,iB,KApB9BvC,EAAKI,KAAKsB,iBAAiB,UAwB3B,SAAsBC,GACpBA,EAAEa,iBAEF,MAAMC,EAAazC,EAAKI,KAAKsC,SAASC,KAAKC,MAC3C,IAAKH,EAAY,OAEjB,MAAMI,EAAO,CACXhC,KAAM4B,EACN3B,UAAU,GAGZC,KD/CyBrB,ECgDdmD,ED/CJtD,MAAMH,EAAK,CAChBI,OAAQ,OACRG,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUJ,KACpB4B,MAAKC,GAAKA,EAAEC,UC0CZF,MAAK5B,IACJK,EAAM+C,KAAKpD,EAAK,IAEjB4B,KAAKhB,GACLgB,KAAKF,GACLK,QAAQP,GDtDN,IAAoBxB,C","sources":["src/js/08-api-todos.js","src/js/08-todos.js"],"sourcesContent":["const URL = 'https://633d710af2b0e623dc73e57a.mockapi.io/api/v1/todos/';\n\nexport function fetchTodos() {\n  return fetch(URL).then(r => r.json());\n}\n\nexport function createTodo(data) {\n  return fetch(URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  }).then(r => r.json());\n}\n\nexport function deleteTodo(id) {\n  return fetch(`${URL}${id}`, {\n    method: 'DELETE',\n  });\n}\n\nexport function updateTodo(id, data) {\n  return fetch(`${URL}${id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  });\n}\n","import {\n  fetchTodos,\n  updateTodo,\n  deleteTodo,\n  createTodo,\n} from './08-api-todos.js';\n\nlet items = [];\n\nconst refs = {\n  list: document.querySelector('.list'),\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n};\n\nloadAndRender();\n\nrefs.list.addEventListener('click', onListItemClick);\nrefs.form.addEventListener('submit', onSubmitForm);\n\n//================== handlers ====================\nfunction onListItemClick(e) {\n  if (e.target === e.currentTarget) return;\n\n  const listItem = e.target.closest('li');\n  const id = listItem.id;\n\n  if (e.target.nodeName === 'BUTTON') {\n    showLoader();\n    deleteTodo(id).then(deleteItem(id)).then(renderTodos).finally(hideLoader);\n  }\n\n  if (e.target.nodeName === 'INPUT') {\n    const data = toogleItem(id);\n    updateTodo(id, data);\n\n    const text = e.target.nextElementSibling;\n    text.classList.toggle('done');\n    listItem.classList.toggle('item--changeBg');\n  }\n}\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n\n  const inputValue = refs.form.elements.text.value;\n  if (!inputValue) return;\n\n  const item = {\n    name: inputValue,\n    isCheked: false,\n  };\n\n  showLoader();\n  createTodo(item)\n    .then(data => {\n      items.push(data);\n    })\n    .then(renderTodos)\n    .then(resetForm)\n    .finally(hideLoader);\n}\n//===================load and render===============\nfunction renderTodos() {\n  const itemsMarkup = items.map(createItemMarkup).join('');\n\n  refs.list.innerHTML = '';\n  refs.list.insertAdjacentHTML('afterbegin', itemsMarkup);\n}\n\nfunction createItemMarkup({ name, isCheked, id }) {\n  return `\n  <li class='item ${isCheked ? 'item--changeBg' : ''}' id='${id}'>\n    <label class='label'>\n      <input type=\"checkbox\" ${isCheked ? 'checked' : ''}>\n      <span class='list__text ${isCheked ? 'done' : ''}'>${name}</span>\n    </label>\n    <button class='close'>x</button>\n  </li>\n  `;\n}\n\nfunction loadAndRender() {\n  showLoader();\n\n  loadData().then(renderTodos).finally(hideLoader);\n}\n\nfunction loadData() {\n  return fetchTodos().then(data => {\n    items = data;\n  });\n}\n//==================work with items===============\n\nfunction deleteItem(id) {\n  items = items.filter(el => el.id !== id);\n}\n\nfunction toogleItem(id) {\n  const toggledItemStatus = {};\n\n  items.map(el => {\n    if (el.id === id) {\n      el.isCheked = !el.isCheked;\n      toggledItemStatus.isCheked = el.isCheked;\n    }\n  });\n\n  return toggledItemStatus;\n}\n//====================loader======================\nfunction showLoader() {\n  refs.loader.classList.add('show');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.remove('show');\n}\n//====================common funk================\nfunction resetForm() {\n  refs.form.reset();\n}\n"],"names":["$d61ff69ea1e5c01c$var$URL","$d61ff69ea1e5c01c$export$a8f41ab6a0a1eaf2","id","fetch","method","$d61ff69ea1e5c01c$export$cb3f627a9987da4","data","headers","body","JSON","stringify","$1c7f2c4ad1d40b93$var$items","$1c7f2c4ad1d40b93$var$refs","list","document","querySelector","form","loader","$1c7f2c4ad1d40b93$var$renderTodos","itemsMarkup","map","$1c7f2c4ad1d40b93$var$createItemMarkup","join","innerHTML","insertAdjacentHTML","name","isCheked","$1c7f2c4ad1d40b93$var$showLoader","classList","add","$1c7f2c4ad1d40b93$var$hideLoader","remove","$1c7f2c4ad1d40b93$var$resetForm","reset","then","r","json","finally","addEventListener","e","target","currentTarget","listItem","closest","nodeName","filter","el","$1c7f2c4ad1d40b93$var$deleteItem","toggledItemStatus","$1c7f2c4ad1d40b93$var$toogleItem","nextElementSibling","toggle","preventDefault","inputValue","elements","text","value","item","push"],"version":3,"file":"08-todos.fa0fd6ac.js.map"}